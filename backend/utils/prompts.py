"""
Prompt Templates for LumoPack Chatbot
‡πÄ‡∏Å‡πá‡∏ö prompt templates ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏ä‡∏ó‡∏ö‡∏≠‡∏ó (14 ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô)
"""

from typing import Dict, Any


# ===================================
# System Prompt (‡∏ö‡∏∏‡∏Ñ‡∏•‡∏¥‡∏Å‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÅ‡∏ä‡∏ó‡∏ö‡∏≠‡∏ó)
# ===================================
SYSTEM_PROMPT = """‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠ "LumoPack Assistant" ‡πÅ‡∏ä‡∏ó‡∏ö‡∏≠‡∏ó‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡πà‡∏≠‡∏á

‡∏ö‡∏∏‡∏Ñ‡∏•‡∏¥‡∏Å‡∏†‡∏≤‡∏û:
- ‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏¥‡∏ï‡∏£ ‡πÉ‡∏à‡πÄ‡∏¢‡πá‡∏ô ‡πÅ‡∏•‡∏∞‡∏û‡∏π‡∏î‡∏à‡∏≤‡∏™‡∏∏‡∏†‡∏≤‡∏û
- ‡∏≠‡∏î‡∏ó‡∏ô ‡πÑ‡∏°‡πà‡∏£‡∏µ‡∏ö‡∏£‡πâ‡∏≠‡∏ô ‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏¥‡∏î‡πÑ‡∏î‡πâ
- ‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç ‡πÅ‡∏ï‡πà‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢‡∏†‡∏≤‡∏©‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢
- ‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏à‡∏£‡∏¥‡∏á

‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:
1. ‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
2. ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• requirement ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô
3. ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠‡∏î‡∏µ-‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
4. ‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠

‡∏Å‡∏é‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:
- ‡∏ï‡∏≠‡∏ö‡∏Å‡∏£‡∏∞‡∏ä‡∏±‡∏ö 2-4 ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 80 ‡∏Ñ‡∏≥
- ‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡∏•‡∏∞ 1 ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡∏´‡πâ‡∏≤‡∏°‡∏ñ‡∏≤‡∏°‡∏´‡∏•‡∏≤‡∏¢‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
- ‡∏´‡πâ‡∏≤‡∏°‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤ (‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏á)
- ‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á‡∏£‡∏±‡∏î‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‡πÉ‡∏´‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏¥‡∏î
- ‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å ‡πÄ‡∏ß‡πâ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏∑‡πà‡∏ô
- ‡∏ñ‡πâ‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡πÉ‡∏à ‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°
- Optional fields: ‡∏ñ‡πâ‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ö‡∏≠‡∏Å "‡πÑ‡∏°‡πà‡∏°‡∏µ" ‡∏´‡∏£‡∏∑‡∏≠ "‡∏Ç‡πâ‡∏≤‡∏°" ‡πÉ‡∏´‡πâ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢
- ‡∏´‡πâ‡∏≤‡∏°‡∏û‡∏π‡∏î‡∏ã‡πâ‡∏≥‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
"""


# ===================================
# Step-by-Step Prompts
# ===================================

def get_greeting_prompt() -> str:
    """‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢ + ‡∏ñ‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"""
    return """‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏≠‡∏ö‡∏≠‡∏∏‡πà‡∏ô ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ï‡∏±‡∏ß‡∏™‡∏±‡πâ‡∏ô‡πÜ ‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠ LumoPack Assistant ‡∏ä‡πà‡∏ß‡∏¢‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡πà‡∏≠‡∏á

‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏£‡∏Å: "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÑ‡∏´‡∏ô‡∏Ñ‡∏∞?"

‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:
1. ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
2. Non-food
3. Food-grade
4. ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏≥‡∏≠‡∏≤‡∏á

‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 5-7 ‡∏Ñ‡∏≥

‚ö†Ô∏è ‡∏´‡πâ‡∏≤‡∏°‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏≠‡∏∑‡πà‡∏ô‡∏ô‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"""


def get_product_type_prompt(user_message: str) -> str:
    """‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"""
    return f"""‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡∏≠‡∏ö‡∏ß‡πà‡∏≤: "{user_message}"

‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:
1. ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ß‡πà‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏´‡∏ô (general, non_food, food_grade, cosmetic)
2. ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏™‡∏±‡πâ‡∏ô‡πÜ (1 ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ)
3. ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏±‡πâ‡∏ô‡∏°‡∏≤‡∏Å‡∏ß‡πà‡∏≤‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ô‡∏µ‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏≠‡∏∞‡πÑ‡∏£ (1 ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ)

‚ö†Ô∏è ‡∏´‡πâ‡∏≤‡∏°‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ñ‡∏±‡∏î‡πÑ‡∏õ (‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ñ‡∏≤‡∏°‡πÄ‡∏≠‡∏á)
‚ö†Ô∏è ‡∏à‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏Ñ‡πà‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ñ‡∏≤‡∏°‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°"""


def get_box_type_prompt(user_message: str, product_type: str) -> str:
    """‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 3: ‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏•‡πà‡∏≠‡∏á"""
    return f"""‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡∏≠‡∏ö‡∏ß‡πà‡∏≤: "{user_message}"
‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤: {product_type}

‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:
1. ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ß‡πà‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÑ‡∏´‡∏ô (rsc ‡∏´‡∏£‡∏∑‡∏≠ die_cut)
2. ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏™‡∏±‡πâ‡∏ô‡πÜ (1 ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ)

‚ö†Ô∏è ‡∏´‡πâ‡∏≤‡∏°‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ñ‡∏±‡∏î‡πÑ‡∏õ (‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ñ‡∏≤‡∏°‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏´‡∏£‡∏∑‡∏≠ Inner ‡πÄ‡∏≠‡∏á)
‚ö†Ô∏è ‡∏à‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏Ñ‡πà‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ñ‡∏≤‡∏°‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°"""


def get_inner_prompt(user_message: str) -> str:
    """‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 4: ‡πÄ‡∏Å‡πá‡∏ö Inner (Optional, 3 ‡∏Å‡∏•‡∏∏‡πà‡∏°, multi-select)"""
    return f"""‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡∏≠‡∏ö‡∏ß‡πà‡∏≤: "{user_message}"

‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:
1. ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ß‡πà‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Inner ‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÑ‡∏´‡∏ô (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠)
   ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà 1 ‚Äî ‡∏Å‡∏±‡∏ô‡∏Å‡∏£‡∏∞‡πÅ‡∏ó‡∏Å: ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏ù‡∏≠‡∏¢ / ‡∏ö‡∏±‡∏ö‡πÄ‡∏ö‡∏¥‡πâ‡∏• / ‡∏ñ‡∏∏‡∏á‡∏•‡∏°
   ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà 2 ‚Äî ‡πÄ‡∏Ñ‡∏•‡∏∑‡∏≠‡∏ö‡∏Å‡∏±‡∏ô‡∏ä‡∏∑‡πâ‡∏ô: AQ / PE / Wax / Bio barrier
   ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà 3 ‚Äî Food-grade: Water-based / PE food / PLA/Bio / Grease-resistant
2. ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏£‡∏∞‡∏ä‡∏±‡∏ö 1-2 ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ
   ‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

‡∏ñ‡πâ‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£: ‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö‡∏™‡∏±‡πâ‡∏ô‡πÜ
‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô: ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á

‚ö†Ô∏è ‡∏´‡πâ‡∏≤‡∏°‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ñ‡∏±‡∏î‡πÑ‡∏õ (‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ñ‡∏≤‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏≠‡∏á)"""


def get_dimensions_prompt(user_message: str) -> str:
    """‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 5: ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á + ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"""
    return f"""‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡∏≠‡∏ö‡∏ß‡πà‡∏≤: "{user_message}"

‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:
1. ‡πÅ‡∏¢‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°:
   - ‡∏Å‡∏ß‡πâ‡∏≤‡∏á (width) ‡∏ã‡∏°.
   - ‡∏¢‡∏≤‡∏ß (length) ‡∏ã‡∏°.
   - ‡∏™‡∏π‡∏á (height) ‡∏ã‡∏°.
   - ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (quantity) ‡∏ä‡∏¥‡πâ‡∏ô

2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:
   - ‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ö‡∏ß‡∏Å
   - ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡πâ‡∏≠‡∏á >= 500 ‡∏ä‡∏¥‡πâ‡∏ô

3. ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö ‡∏™‡∏±‡πâ‡∏ô‡πÜ 1-2 ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ

‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:
- ‡∏ñ‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö: ‡∏ñ‡∏≤‡∏°‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏î
- ‡∏ñ‡πâ‡∏≤‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 500: ‡πÅ‡∏à‡πâ‡∏á‡∏ß‡πà‡∏≤‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏Ñ‡∏∑‡∏≠ 500 ‡∏ä‡∏¥‡πâ‡∏ô

‚ö†Ô∏è ‡∏´‡πâ‡∏≤‡∏°‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ñ‡∏±‡∏î‡πÑ‡∏õ (‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡∏£‡∏∏‡∏õ requirement ‡πÄ‡∏≠‡∏á)"""


def _format_inner_display(inner_raw) -> str:
    """
    ‡πÅ‡∏õ‡∏•‡∏á inner ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö:
    - None / "skip" ‚Üí "‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Å‡∏≥‡∏´‡∏ô‡∏î"
    - List[Dict]    ‚Üí ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
    - str           ‚Üí ‡∏™‡πà‡∏á‡∏ï‡∏£‡∏á (legacy)
    """
    _INNER_NAMES = {
        "shredded_paper":   "‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏ù‡∏≠‡∏¢",
        "air_bubble":       "‡∏ö‡∏±‡∏ö‡πÄ‡∏ö‡∏¥‡πâ‡∏•",
        "air_cushion":      "‡∏ñ‡∏∏‡∏á‡∏•‡∏°",
        "aq_coating":       "AQ Coating (‡∏Å‡∏±‡∏ô‡∏ä‡∏∑‡πâ‡∏ô)",
        "pe_coating":       "PE Coating (‡∏Å‡∏±‡∏ô‡∏ä‡∏∑‡πâ‡∏ô)",
        "wax_coating":      "Wax Coating (‡∏Å‡∏±‡∏ô‡∏ä‡∏∑‡πâ‡∏ô)",
        "bio_barrier":      "Bio/Water-based Barrier",
        "water_based_food": "Water-based Food Coating",
        "pe_food_grade":    "PE Food-grade Coating",
        "pla_bio":          "PLA/Bio Coating",
        "grease_resistant": "Grease-resistant Coating",
    }
    if not inner_raw or inner_raw == "skip":
        return "‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Å‡∏≥‡∏´‡∏ô‡∏î"
    if isinstance(inner_raw, list):
        names = [_INNER_NAMES.get(item.get("type", ""), item.get("type", "")) for item in inner_raw]
        return ", ".join(names) if names else "‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Å‡∏≥‡∏´‡∏ô‡∏î"
    if isinstance(inner_raw, str):
        return _INNER_NAMES.get(inner_raw, inner_raw)
    return "‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Å‡∏≥‡∏´‡∏ô‡∏î"


def get_checkpoint1_prompt(collected_data: Dict[str, Any]) -> str:
    """‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 6: Checkpoint 1 - ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≠‡∏ö‡πÅ‡∏£‡∏Å"""
    product_type_th = {
        "general": "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ",
        "non_food": "Non-food",
        "food_grade": "Food-grade",
        "cosmetic": "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏≥‡∏≠‡∏≤‡∏á"
    }
    
    box_type_th = {
        "rsc": "‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô RSC",
        "die_cut": "‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÑ‡∏î‡∏Ñ‡∏±‡∏ó (Die-cut)"
    }
    
    dims = collected_data.get("dimensions", {})
    inner_display = _format_inner_display(collected_data.get("inner"))
    
    return f"""‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏£‡∏∏‡∏õ Requirement ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà 1 ‡πÅ‡∏•‡πâ‡∏ß!

‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏£‡∏∏‡∏õ‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:

üìã ‡∏™‡∏£‡∏∏‡∏õ Requirement ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà 1 (‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á)
{'='*50}
‚Ä¢ ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤: {product_type_th.get(collected_data.get('product_type'), '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏')}
‚Ä¢ ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏•‡πà‡∏≠‡∏á: {box_type_th.get(collected_data.get('box_type'), '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏')}
‚Ä¢ Inner: {inner_display}
‚Ä¢ ‡∏Ç‡∏ô‡∏≤‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á: {dims.get('width', '?')}√ó{dims.get('length', '?')}√ó{dims.get('height', '?')} cm
‚Ä¢ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏•‡∏¥‡∏ï: {collected_data.get('quantity', '?'):,} ‡∏ä‡∏¥‡πâ‡∏ô

‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏ñ‡∏≤‡∏°‡∏ß‡πà‡∏≤: "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏Ñ‡∏∞? ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡πà‡∏ß‡∏¢‡∏ö‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏∞"

‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:
- ‡∏ñ‡πâ‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô: ‡πÑ‡∏õ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ (‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÅ‡∏•‡∏∞‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á)
- ‡∏ñ‡πâ‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡∏ñ‡∏≤‡∏°‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡πà‡∏ß‡∏ô‡πÑ‡∏´‡∏ô"""


def get_mood_tone_prompt(user_message: str) -> str:
    """‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 7: ‡πÄ‡∏Å‡πá‡∏ö Mood & Tone (Optional)"""
    return f"""‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡∏≠‡∏ö‡∏ß‡πà‡∏≤: "{user_message}"

‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:
1. ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ß‡πà‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏≠‡∏∞‡πÑ‡∏£ ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≤‡∏°
2. ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‡∏™‡∏±‡πâ‡∏ô‡πÜ 1 ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ

‡∏ñ‡πâ‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:
- ‡∏™‡∏î‡πÉ‡∏™ ‡∏™‡∏ô‡∏∏‡∏Å‡∏™‡∏ô‡∏≤‡∏ô / ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏´‡∏£‡∏π ‡∏™‡∏∏‡∏Ç‡∏∏‡∏° / ‡∏°‡∏¥‡∏ô‡∏¥‡∏°‡∏≠‡∏• ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏á‡πà‡∏≤‡∏¢ / ‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏° ‡∏´‡∏£‡∏π‡∏´‡∏£‡∏≤

‡∏ô‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô Optional field ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏î‡πâ

‚ö†Ô∏è ‡∏´‡πâ‡∏≤‡∏°‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ñ‡∏±‡∏î‡πÑ‡∏õ (‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ñ‡∏≤‡∏°‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡πÄ‡∏≠‡∏á)"""


def get_logo_prompt(user_message: str) -> str:
    """‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 8: ‡πÄ‡∏Å‡πá‡∏ö‡πÇ‡∏•‡πÇ‡∏Å‡πâ (Optional)"""
    return f"""‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡∏≠‡∏ö‡∏ß‡πà‡∏≤: "{user_message}"

‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:
1. ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ß‡πà‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏°‡∏µ‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
2. ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ: ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏±‡πâ‡∏ô‡πÜ ‡πÅ‡∏•‡πâ‡∏ß‡∏ñ‡∏≤‡∏° "‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏™‡πà‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏´‡∏ô‡∏Ñ‡∏∞?"
3. ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ: ‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö‡∏™‡∏±‡πâ‡∏ô‡πÜ

‡∏ï‡∏≠‡∏ö‡∏Å‡∏£‡∏∞‡∏ä‡∏±‡∏ö 1-2 ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ
‡∏ô‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô Optional field ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏î‡πâ

‚ö†Ô∏è ‡∏´‡πâ‡∏≤‡∏°‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ñ‡∏±‡∏î‡πÑ‡∏õ"""


def get_special_effects_prompt(user_message: str) -> str:
    """‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 9: ‡πÄ‡∏Å‡πá‡∏ö‡∏•‡∏π‡∏Å‡πÄ‡∏•‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏© (Optional)"""
    return f"""‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡∏≠‡∏ö‡∏ß‡πà‡∏≤: "{user_message}"

‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:
1. ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ß‡πà‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏π‡∏Å‡πÄ‡∏•‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
2. ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£: ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‡∏™‡∏±‡πâ‡∏ô‡πÜ 1-2 ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ
3. ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£: ‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö‡∏™‡∏±‡πâ‡∏ô‡πÜ

‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏•‡∏±‡∏Å:
- ‡πÄ‡∏Ñ‡∏•‡∏∑‡∏≠‡∏ö‡πÄ‡∏á‡∏≤ (AQ/UV/OPP) | ‡πÄ‡∏Ñ‡∏•‡∏∑‡∏≠‡∏ö‡∏î‡πâ‡∏≤‡∏ô (UV/PVC/Varnish)
- ‡∏õ‡πä‡∏±‡∏°‡∏ô‡∏π‡∏ô/‡∏à‡∏° | ‡∏õ‡πä‡∏±‡∏°‡∏ü‡∏≠‡∏¢‡∏•‡πå (‡∏ó‡∏≠‡∏á/‡πÄ‡∏á‡∏¥‡∏ô/‡πÇ‡∏Æ‡πÇ‡∏•‡πÅ‡∏Å‡∏£‡∏°)

‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 1 ‡∏≠‡∏¢‡πà‡∏≤‡∏á
‡∏ô‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô Optional field ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏î‡πâ

‚ö†Ô∏è ‡∏´‡πâ‡∏≤‡∏°‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ñ‡∏±‡∏î‡πÑ‡∏õ"""


def get_checkpoint2_prompt(collected_data: Dict[str, Any]) -> str:
    """‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 10: Checkpoint 2 - ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≠‡∏ö‡∏™‡∏≠‡∏á"""
    dims = collected_data.get("dimensions", {})
    mood = collected_data.get("mood_tone", "‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Å‡∏≥‡∏´‡∏ô‡∏î")
    logo = "‡∏°‡∏µ" if collected_data.get("has_logo") else "‡πÑ‡∏°‡πà‡∏°‡∏µ"
    logo_pos = collected_data.get("logo_positions", [])
    effects = collected_data.get("special_effects", [])
    
    effects_names = [e.get("type", "") for e in effects] if effects else []
    effects_str = ", ".join(effects_names) if effects_names else "‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Å‡∏≥‡∏´‡∏ô‡∏î"
    
    return f"""‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏£‡∏∏‡∏õ Requirement ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà 2 ‡πÅ‡∏•‡πâ‡∏ß!

‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏£‡∏∏‡∏õ‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:

üìã ‡∏™‡∏£‡∏∏‡∏õ Requirement ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà 2 (‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÅ‡∏•‡∏∞‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á)
{'='*50}
‚Ä¢ ‡∏Ç‡∏ô‡∏≤‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á: {dims.get('width', '?')}√ó{dims.get('length', '?')}√ó{dims.get('height', '?')} cm
‚Ä¢ Mood & Tone: {mood}
‚Ä¢ ‡πÇ‡∏•‡πÇ‡∏Å‡πâ: {logo}
{f"  ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á: {', '.join(logo_pos)}" if logo_pos else ""}
‚Ä¢ ‡∏•‡∏π‡∏Å‡πÄ‡∏•‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©: {effects_str}

‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏ñ‡∏≤‡∏°‡∏ß‡πà‡∏≤: "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏Ñ‡∏∞?"

‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:
- ‡∏ñ‡πâ‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô: ‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á Mockup ‡πÅ‡∏•‡∏∞‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤‡πÉ‡∏´‡πâ
- ‡∏ñ‡πâ‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡∏ñ‡∏≤‡∏°‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡πà‡∏ß‡∏ô‡πÑ‡∏´‡∏ô"""


def get_mockup_generation_prompt() -> str:
    """‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 11: ‡πÅ‡∏à‡πâ‡∏á‡∏ß‡πà‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Mockup"""
    return """‡∏ö‡∏≠‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ß‡πà‡∏≤:

"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏û Mockup ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ï‡∏≤‡∏° requirement ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ô‡∏∞‡∏Ñ‡∏∞ ‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà..."

‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤: "‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏†‡∏≤‡∏û‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏∞ ‡∏´‡∏≤‡∏Å‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠"

(‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏à‡∏∞‡∏°‡∏µ‡∏†‡∏≤‡∏û Mockup ‡πÅ‡∏™‡∏î‡∏á)"""


def get_quote_generation_prompt(pricing_data: Dict[str, Any]) -> str:
    """‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 12: ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤ ‚Äî format pricing_data ‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á LLM"""
    
    # --- ‡πÅ‡∏¢‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡∏Å‡∏°‡∏≤ ---
    dims = pricing_data.get("dimensions", {})
    box_base = pricing_data.get("box_base", {})
    inner = pricing_data.get("inner", {})
    coatings = pricing_data.get("coatings", [])
    stampings = pricing_data.get("stampings", [])

    dims_str = (
        f"{dims.get('width', '?')}√ó{dims.get('length', '?')}√ó{dims.get('height', '?')} cm"
    )
    qty = pricing_data.get("quantity", 0)

    # Inner
    inner_line = "‡πÑ‡∏°‡πà‡∏°‡∏µ"
    if inner and inner.get("total_price", 0) > 0:
        inner_line = (
            f"{inner.get('name', 'Inner')} ‚Äî "
            f"{inner.get('price_per_box', 0):.2f} ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏•‡πà‡∏≠‡∏á "
            f"(‡∏£‡∏ß‡∏° {inner.get('total_price', 0):,.2f} ‡∏ö‡∏≤‡∏ó)"
        )

    # Coatings
    coating_lines = "‡πÑ‡∏°‡πà‡∏°‡∏µ"
    if coatings:
        coating_lines = "\n".join(
            f"  - {c.get('name', c.get('type', ''))}: "
            f"{c.get('price_per_box', 0):.2f} ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏•‡πà‡∏≠‡∏á "
            f"(‡∏£‡∏ß‡∏° {c.get('total_price', 0):,.2f} ‡∏ö‡∏≤‡∏ó)"
            for c in coatings
        )

    # Stampings
    stamp_lines = "‡πÑ‡∏°‡πà‡∏°‡∏µ"
    if stampings:
        parts = []
        for s in stampings:
            line = f"  - {s.get('type', '')} ‚Äî ‡∏õ‡πä‡∏±‡∏° {s.get('stamp_cost_per_box', 0):.2f} ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏•‡πà‡∏≠‡∏á"
            if s.get("block_cost", 0) > 0:
                line += f", ‡∏ö‡∏•‡πá‡∏≠‡∏Å {s.get('block_cost', 0):,.0f} ‡∏ö‡∏≤‡∏ó"
            line += f" (‡∏£‡∏ß‡∏° {s.get('total', 0):,.2f} ‡∏ö‡∏≤‡∏ó)"
            parts.append(line)
        stamp_lines = "\n".join(parts)

    subtotal  = pricing_data.get("subtotal", 0)
    vat       = pricing_data.get("vat", 0)
    grand     = pricing_data.get("grand_total", 0)
    ppb_box   = box_base.get("price_per_box", 0)
    total_box = box_base.get("total_price", 0)

    return f"""‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÉ‡∏´‡πâ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á ‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡πâ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô:

üí∞ ‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤ LumoPack
{'='*50}
üì¶ ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á
‚Ä¢ ‡∏Ç‡∏ô‡∏≤‡∏î: {dims_str}
‚Ä¢ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: {qty:,} ‡∏ä‡∏¥‡πâ‡∏ô

üíµ ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤
‚Ä¢ ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤: {ppb_box:.2f} ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏•‡πà‡∏≠‡∏á (‡∏£‡∏ß‡∏° {total_box:,.2f} ‡∏ö‡∏≤‡∏ó)
‚Ä¢ Inner: {inner_line}
‚Ä¢ Coating/‡∏•‡∏π‡∏Å‡πÄ‡∏•‡πà‡∏ô:
{coating_lines}
‚Ä¢ ‡∏õ‡πä‡∏±‡∏°:
{stamp_lines}

‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: {subtotal:,.2f} ‡∏ö‡∏≤‡∏ó
VAT 7%: {vat:,.2f} ‡∏ö‡∏≤‡∏ó
‡∏£‡∏ß‡∏°‡∏™‡∏∏‡∏ó‡∏ò‡∏¥: {grand:,.2f} ‡∏ö‡∏≤‡∏ó

‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏ñ‡∏≤‡∏°‡∏ß‡πà‡∏≤: "‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏Ñ‡∏∞?"
"""


def get_order_confirmation_prompt(user_message: str) -> str:
    """‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 13: ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠"""
    return f"""‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡∏≠‡∏ö‡∏ß‡πà‡∏≤: "{user_message}"

‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:
1. ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ß‡πà‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

2. ‡∏ñ‡πâ‡∏≤‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô:
   - ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
   - ‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏°‡∏µ‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á
   - ‡∏ö‡∏≠‡∏Å‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á session_id

3. ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô:
   - ‡∏ñ‡∏≤‡∏°‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡∏≠‡∏¢‡∏≤‡∏Å‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
   - ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°"""


def get_end_conversation_prompt() -> str:
    """‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 14: ‡∏à‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏ó‡∏ô‡∏≤"""
    return """‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏ö‡∏≠‡∏∏‡πà‡∏ô:

üôè ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ LumoPack

‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠:
- ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á
- ‡∏™‡πà‡∏á‡∏†‡∏≤‡∏û Mockup ‡∏ó‡∏µ‡πà‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥
- ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï

‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡πà‡∏∞

‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏°‡∏≤‡∏Å‡∏ô‡∏∞‡∏Ñ‡∏∞! üòä"""


# ===================================
# Helper Function
# ===================================
def get_prompt_for_step(step: int, **kwargs) -> str:
    """
    ‡∏î‡∏∂‡∏á prompt ‡∏ï‡∏≤‡∏° step ‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î
    
    Args:
        step: ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç step (1-14)
        **kwargs: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÉ‡∏ô prompt
        
    Returns:
        prompt string
    """
    prompt_map = {
        1: get_greeting_prompt,
        2: lambda: get_product_type_prompt(kwargs.get("user_message", "")),
        3: lambda: get_box_type_prompt(
            kwargs.get("user_message", ""),
            kwargs.get("product_type", "")
        ),
        4: lambda: get_inner_prompt(kwargs.get("user_message", "")),
        5: lambda: get_dimensions_prompt(kwargs.get("user_message", "")),
        6: lambda: get_checkpoint1_prompt(kwargs.get("collected_data", {})),
        7: lambda: get_mood_tone_prompt(kwargs.get("user_message", "")),
        8: lambda: get_logo_prompt(kwargs.get("user_message", "")),
        9: lambda: get_special_effects_prompt(kwargs.get("user_message", "")),
        10: lambda: get_checkpoint2_prompt(kwargs.get("collected_data", {})),
        11: get_mockup_generation_prompt,
        12: lambda: get_quote_generation_prompt(kwargs.get("pricing_data", {})),
        13: lambda: get_order_confirmation_prompt(kwargs.get("user_message", "")),
        14: get_end_conversation_prompt,
    }
    
    prompt_func = prompt_map.get(step)
    if prompt_func:
        return prompt_func() if callable(prompt_func) else prompt_func
    else:
        return "‡πÑ‡∏°‡πà‡∏û‡∏ö prompt ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö step ‡∏ô‡∏µ‡πâ"